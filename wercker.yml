box: wercker/golang
build:
  steps:
    - setup-go-workspace

deploy:
  steps:
    - setup-go-workspace

    - script:
        name: Get dependencies
        code: |-
            go get github.com/gorilla/mux
            go get github.com/astaxie/beego/orm
            go get github.com/go-sql-driver/mysql
            go get code.google.com/p/go-uuid/uuid
            go get github.com/golang/glog
            go get golang.org/x/net/context
            go get golang.org/x/oauth2
            go get google.golang.org/cloud/compute/metadata

    - script:
        cwd: ui/
        name: Install bower
        code: |
          sudo npm install -g bower
          bower install --config.interactive=false

    - pjvds/go-appengine-deploy:
        email: damnpoet@gmail.com
        password: $APP_ENGINE_PASS